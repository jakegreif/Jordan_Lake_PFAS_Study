---
title: "Data_Retrieval"
author: "Jake Greif"
date: "7/11/2019"
output: html_document
editor_options: 
  chunk_output_type: console
---
## Load Packages
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
install.packages("dataRetrieval")
library(dataRetrieval)
#vignette("dataRetrieval",package = "dataRetrieval")

mytheme <- theme_bw(base_size = 14) +
  theme(strip.background = element_rect(fill = "white"))

theme_set(mytheme)
```

The following 3 chunks create a simple dataframe for each sampling site. The dataframes contain the agency responsible for the gauge, site number, date, discharge (m^3/s), and the approval status of the data.

## Haw River at Haw River, NC 
```{r}
siteNo1 <- "02096500"
pCode1 <- "00060"
start.date1 <- "1999-01-01"
end.date1 <- ""

Haw1 <- readNWISdv(siteNumbers = siteNo1,
                     parameterCd = pCode1,
                     startDate = start.date1,
                     endDate = end.date1)

Haw1 <- renameNWISColumns(Haw1)
```

## Haw River near Bynum, NC
```{r}
siteNo2 <- "02096960"
pCode2 <- "00060"
start.date2 <- "1999-01-01"
end.date2 <- ""

Haw2 <- readNWISdv(siteNumbers = siteNo2,
                     parameterCd = pCode2,
                     startDate = start.date2,
                     endDate = end.date2)

Haw2 <- renameNWISColumns(Haw2)
```

## Cane Creek near Orange Grove, NC
```{r}
siteNo3 <- "02096846"
pCode3 <- "00060"
start.date3 <- "1999-01-01"
end.date3 <- ""

Cane <- readNWISdv(siteNumbers = siteNo3,
                     parameterCd = pCode3,
                     startDate = start.date3,
                     endDate = end.date3)

Cane <- renameNWISColumns(Cane)
```

The following chunk visualizes the discharge data from each site as a timeseries.

## Data Exploration
```{r}
Haw1_p_Info <- attr(Haw1, "variableInfo")
Haw1_site_Info <- attr(Haw1, "siteInfo")
  
Haw1_Plot <- ggplot(Haw1, aes(Date, Flow)) +
         geom_line() +
         xlab("Year") +
         ylab(Haw1_p_Info$variableDescription) +
         ggtitle(Haw1_site_Info$station_nm)

Haw2_p_Info <- attr(Haw2, "variableInfo")
Haw2_site_Info <- attr(Haw2, "siteInfo")
  
Haw2_Plot <- ggplot(Haw2, aes(Date, Flow)) +
         geom_line() +
         xlab("Year") +
         ylab(Haw2_p_Info$variableDescription) +
         ggtitle(Haw2_site_Info$station_nm)

Cane_p_Info <- attr(Cane, "variableInfo")
Cane_site_Info <- attr(Cane, "siteInfo")
  
Cane_Plot <- ggplot(Cane, aes(Date, Flow)) +
         geom_line() +
         xlab("Year") +
         ylab(Cane_p_Info$variableDescription) +
         ggtitle(Cane_site_Info$station_nm)

Haw1_Plot
Haw2_Plot
Cane_Plot
```

